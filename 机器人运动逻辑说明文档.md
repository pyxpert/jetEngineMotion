# 双节爬壁机器人在航空发动机内的运动逻辑说明

## 1. 概述

本文档描述了一种双节爬壁机器人在航空发动机/燃气轮机圆柱形内腔中的运动规划逻辑。该机器人采用电磁吸附方式贴附于内壁表面，通过"蠕虫式"爬行实现在曲面上的移动。

## 2. 机器人结构

### 2.1 基本构成

```
┌─────────────────┐     ┌─────────────────┐
│     前节        │─────│     后节        │
│   (Front)       │ω3,v │   (Rear)        │
│    [M1]         │     │    [M2]         │
└─────────────────┘     └─────────────────┘
      ↑ω1                      ↑ω2
```

- **前节（Front Section）**：长40mm × 宽30mm，中心安装电磁铁M1
- **后节（Rear Section）**：长40mm × 宽30mm，中心安装电磁铁M2
- **电磁铁**：直径5mm的圆柱形，吸力面朝向壁面
- **高度**：电磁铁底面到机器人上表面距离h=30mm

### 2.2 驱动电机

| 电机 | 功能 | 运动范围 |
|------|------|----------|
| ω1 | 前节中心旋转电机，控制前节绕M1旋转 | -360° ~ +360° |
| ω2 | 后节中心旋转电机，控制后节绕M2旋转 | -360° ~ +360° |
| ω3 | 两节间旋转电机（翻折角），控制两节相对角度 | -90° ~ +90° |
| v  | 丝杠电机（直线电机），控制两节间距离 | 0mm ~ 8mm |

### 2.3 关键角度定义

- **θ3（翻折角/γ）**：两节之间的相对旋转角度
  - θ3 = 0°：两节上表面共面，两个电磁铁可同时贴附壁面
  - θ3 > 0°：后节相对于前节向上翻折（后节电磁铁离开壁面）
  - θ3 < 0°：后节相对于前节向下翻折

## 3. 工作环境

### 3.1 圆柱形内腔

```
        Z轴 (轴向)
         ↑
         │    ╭────────────╮
         │   ╱              ╲
         │  │   圆柱内壁    │  半径R = 900mm
         │  │   机器人→●    │
         │   ╲              ╱
         │    ╰────────────╯
         └──────────────────→ 周向(θ)
```

- **内壁半径**：R = 900mm（恒定）
- **轴向长度**：Z = 0mm ~ 1000mm
- **叶片障碍物**：位于Z = 200mm, 400mm, 600mm, 800mm处

### 3.2 坐标系统

- **笛卡尔坐标**：(X, Y, Z)
  - X, Y：径向坐标
  - Z：轴向坐标（沿发动机轴线方向）
  
- **圆柱坐标**：(θ, Z)
  - θ：周向角度（相对于X轴正方向）
  - Z：轴向位置

- **坐标转换**：
  ```
  X = R × cos(θ)
  Y = R × sin(θ)
  ```

## 4. 运动约束

### 4.1 电磁铁状态约束

| M1状态 | M2状态 | 允许的操作 |
|--------|--------|------------|
| ON(吸附) | ON(吸附) | 所有电机必须停止（机器人固定） |
| ON | OFF | 后节可移动（ω3, v），前节可绕M1旋转（ω1） |
| OFF | ON | 前节可移动（ω3, v），后节可绕M2旋转（ω2） |
| OFF | OFF | **禁止**（机器人会滑落） |

### 4.2 物理约束

1. **同时吸附时两节必须共面**：当M1和M2同时吸附时，θ3必须接近0°，否则无法同时贴附曲面
2. **切换吸附前必须贴紧壁面**：要切换吸附足，需要先通过θ3旋转将未吸附足**贴紧壁面**（θ3→0°），确保新的电磁铁已经接触壁面后，才能切换吸附状态。否则在切换瞬间会出现没有电磁铁实际吸附在壁面上的情况，导致机器人滑脱
3. **前后足不能重合**：物理上前后足始终保持一定距离（约40mm）

## 5. 基本运动模式

### 5.1 蠕虫式轴向爬行（Z方向移动）

这是机器人沿发动机轴向前进的主要方式，类似于蠕虫的蠕动。

**单步运动周期（向Z正方向前进）：**

```
阶段1: 准备阶段
┌───┐  ┌───┐
│M1 │──│M2 │  初始状态：双足吸附，θ3=0°
│ ● │  │ ● │
└───┘  └───┘
  ↓      ↓
 壁面壁面壁面

阶段2: 后足脱附 + 内折
┌───┐  ┌───┐
│M1 │──│M2 │  M2脱附，θ3增大（约35°）
│ ● │  │ ○ │  后节被抬起离开壁面
└───┘  └───┘↗
  ↓      
 壁面壁面壁面

阶段3: 丝杠伸展
┌───┐    ┌───┐
│M1 │────│M2 │  v电机伸出，两节拉开
│ ● │    │ ○ │  后节向前（Z增大方向）移动
└───┘    └───┘↗
  ↓      
 壁面壁面壁面

阶段4: 放下（贴紧壁面）
┌───┐    ┌───┐
│M1 │────│M2 │  θ3恢复到0°，后节放下
│ ● │    │ ○ │  后节电磁铁贴紧壁面（但尚未通电吸附）
└───┘    └───┘
  ↓        ↓
 壁面壁面壁面

阶段5: 双足吸附（安全切换）
┌───┐    ┌───┐
│M1 │────│M2 │  **关键步骤**：先使M2通电吸附
│ ● │    │ ● │  确保M2已稳定吸附后，才能进行下一步
└───┘    └───┘
  ↓        ↓
 壁面壁面壁面

阶段6: 前足脱附 + 内折
┌───┐    ┌───┐
│M1 │────│M2 │  M1脱附，θ3变化
│ ○ │↖   │ ● │  前节被抬起
└───┘    └───┘
           ↓
 壁面壁面壁面

阶段7: 丝杠收缩
  ┌───┐  ┌───┐
  │M1 │──│M2 │  v电机收缩，两节靠拢
  │ ○ │↖ │ ● │  前节被"推"向前（Z增大）
  └───┘  └───┘
           ↓
 壁面壁面壁面

阶段8: 放下（贴紧壁面）
  ┌───┐  ┌───┐
  │M1 │──│M2 │  θ3恢复到0°
  │ ○ │  │ ● │  前节电磁铁贴紧壁面（尚未通电）
  └───┘  └───┘
    ↓      ↓
 壁面壁面壁面

阶段9: 双足吸附（完成一个周期）
  ┌───┐  ┌───┐
  │M1 │──│M2 │  M1通电吸附
  │ ● │  │ ● │  双足都稳定吸附，完成一个周期
  └───┘  └───┘
    ↓      ↓
 壁面壁面壁面
```

**状态码序列示例**（格式：ω1ω2ω3vm1m2）：

```
000011 → 双足吸附，静止
000010 → 后足脱附
001010 → θ3正转（内折，抬起后足）
001010 → 继续内折至目标角度
0010xx → 丝杠伸展（如需要轴向移动）
002010 → θ3反转（放下后足）
000011 → 双足吸附
000001 → 前足脱附
001001 → θ3正转（内折，抬起前足）
002001 → θ3反转（放下前足）
000011 → 双足吸附，完成一步
```

### 5.2 周向旋转（θ方向移动）

当机器人需要绕圆柱壁面周向移动（改变θ角度）时：

```
阶段1: 单足吸附
┌───┐  ┌───┐
│M1 │──│M2 │  M1吸附，M2脱附
│ ● │  │ ○ │
└───┘  └───┘

阶段2: ω1旋转
    ┌───┐
    │M2 │     后节绕M1旋转
    │ ○ │     （通过ω1电机）
  ┌─┴───┴─┐
  │  M1   │
  │  ●    │
  └───────┘
```

- **前节吸附时**：通过ω1旋转，后节绕前节电磁铁M1转动
- **后节吸附时**：通过ω2旋转，前节绕后节电磁铁M2转动

### 5.3 旋转式轴向移动（替代方案）

除了蠕虫式爬行外，轴向移动也可以采用类似周向旋转的逻辑：

```
阶段1: 前足吸附，后足脱附并抬起
阶段2: 后节绕M1旋转180°（通过ω1电机）
阶段3: 后足放下并吸附
阶段4: 前足脱附并抬起
阶段5: 前节绕M2旋转180°（通过ω2电机）
阶段6: 前足放下并吸附
```

这种方式每次旋转180°可以实现较大的轴向位移。

### 5.4 蠕虫式周向移动（替代方案）

同样，周向运动也可以采用蠕虫式逻辑：

```
阶段1: 双足吸附，θ3=0°
阶段2: 后足脱附，θ3内折抬起后足
阶段3: ω1旋转一定角度（周向位移）
阶段4: θ3放下后足，双足吸附
阶段5: 前足脱附，θ3内折抬起前足
阶段6: ω2旋转一定角度（周向位移）
阶段7: θ3放下前足，双足吸附
```

### 5.5 运动方式的灵活性

**总结：轴向运动和周向运动可以互换使用两种运动模式：**

| 运动模式 | 轴向移动 | 周向移动 |
|----------|----------|----------|
| 蠕虫式 | 丝杠伸缩 + 交替吸附 | ω1/ω2小角度旋转 + 交替吸附 |
| 旋转式 | 绕吸附点旋转180° | 绕吸附点旋转任意角度 |

### 5.6 复合运动

实际路径规划中，机器人通常需要同时进行轴向和周向运动，这通过分解为多个基本运动步骤来实现：

1. 先进行周向调整（绕过障碍物）
2. 再进行轴向前进
3. 交替进行，逐步接近目标

## 6. 状态码格式

### 6.1 六位状态码定义

```
ω1 ω2 ω3 v m1 m2
 │  │  │  │  │  └── 后节电磁铁M2：0=OFF, 1=ON
 │  │  │  │  └───── 前节电磁铁M1：0=OFF, 1=ON
 │  │  │  └──────── 丝杠电机v：0=停, 1=伸出, 2=收缩
 │  │  └─────────── 翻折电机ω3：0=停, 1=正转, 2=反转
 │  └────────────── 后节旋转电机ω2：0=停, 1=正转, 2=反转
 └───────────────── 前节旋转电机ω1：0=停, 1=正转, 2=反转
```

### 6.2 常见状态码

| 状态码 | 含义 |
|--------|------|
| 000011 | 双足吸附，所有电机停止（安全/静止状态） |
| 000010 | 前足吸附，后足脱附，准备移动后节 |
| 000001 | 后足吸附，前足脱附，准备移动前节 |
| 001010 | 前足吸附，ω3正转（内折抬起后足） |
| 002010 | 前足吸附，ω3反转（放下后足） |
| 001001 | 后足吸附，ω3正转（内折抬起前足） |
| 002001 | 后足吸附，ω3反转（放下前足） |
| 100010 | 前足吸附，ω1正转（纯周向移动，后足悬空） |
| 010001 | 后足吸附，ω2正转（纯周向移动，前足悬空） |
| 101010 | 前足吸附，ω1正转同时ω3正转（周向移动+内折） |
| 020001 | 后足吸附，ω2反转（纯周向移动，前足悬空） |
| 0010**1**0 | 前足吸附，丝杠伸出（轴向蠕虫爬行） |
| 0020**0**1 | 后足吸附，丝杠收缩（轴向蠕虫爬行） |

**注**：状态码格式为 `ω1ω2ω3vm1m2`，第4位是丝杠电机v，第3位是翻折电机ω3

## 7. 路径规划策略

### 7.1 避障策略

由于发动机内存在叶片障碍物，机器人需要在周向上绕过叶片：

```
     叶片
      │
      │  ○──→──○ 绕行路径
      │ ↗      ↘
起点 ○        ○ 终点
      │        │
      │        │
──────┴────────┴────── Z轴
```

### 7.2 步长控制

- **路径规划步长**：约20mm
- **单次丝杠行程**：最大8mm
- **θ3翻折角度**：典型值35°

### 7.3 运动时间计算

各电机运动速度：
- ω3角速度：约0.5 rad/s（≈28.6°/s）
- ω1/ω2角速度：约0.5 rad/s
- v线速度：约0.5 mm/s

## 8. 典型运动序列示例

### 8.1 纯轴向前进（从Z=40mm到Z=1000mm）

位置：θ = -45°（固定），沿Z轴正方向前进

```
步骤1: 000010 (0.5s)   - 后足脱附
步骤2: 001010 (1.2s)   - 内折（θ3→35°）
步骤3: 001010 (12.8s)  - 继续内折至90°（或进行丝杠伸展）
步骤4: 002010 (1.2s)   - 放下（θ3→0°）
步骤5: 000011 (0.5s)   - 双足吸附
步骤6: 000001 (0.5s)   - 前足脱附
步骤7: 001001 (1.2s)   - 内折
步骤8: 002001 (12.8s)  - 放下（包含丝杠收缩）
步骤9: 000011 (0.5s)   - 双足吸附
...重复以上周期...
```

### 8.2 带周向调整的前进

当需要绕过障碍物时，会在周向运动步骤中加入ω1或ω2旋转：

```
步骤X: 101010 (0.5s)   - 前足吸附，ω1旋转（周向移动）
步骤X: 010001 (0.5s)   - 后足吸附，ω2旋转（周向移动）
```

## 9. 关键设计考虑

### 9.1 为什么需要翻折（θ3）？

在半径900mm的圆柱内壁上，翻折动作的作用：

1. **抬起未吸附足**：当一足吸附、另一足脱附时，通过θ3翻折将脱附的电磁铁抬起离开壁面，为运动（丝杠伸缩或旋转）提供空间
2. **放下未吸附足**：运动完成后，通过θ3恢复将电磁铁**贴紧壁面**，为切换吸附做准备
3. **安全切换的前提**：只有当未吸附足已经贴紧壁面后，才能安全地切换吸附状态，否则会出现瞬间无吸附的危险状态

### 9.2 为什么θ3在双足吸附时必须接近0°？

- 当两个电磁铁都需要吸附时，两节上表面必须近似共面
- 只有共面状态才能使两个电磁铁底面都与曲面相切
- θ3≠0°时，必然有一个电磁铁无法正确吸附

### 9.3 蠕虫式爬行的优势

- 始终保持至少一个吸附点，确保安全
- 适应曲面环境
- 运动稳定可控
- 可精确控制位移量

## 10. 安全注意事项

### 10.1 吸附切换的安全原则

**核心原则：切换吸附前，必须确保新的吸附足已经贴紧壁面**

```
危险操作（禁止）：
M1吸附 → M1脱附 → M2吸附（M2悬空时切换，机器人滑脱！）

安全操作（正确）：
M1吸附 → θ3放下使M2贴紧壁面 → M2吸附 → M1脱附
```

### 10.2 状态转换安全检查

每次切换吸附状态前，必须验证：
1. θ3角度是否接近0°（两节共面）
2. 待吸附的电磁铁是否已贴紧壁面
3. 当前吸附足是否稳定

## 11. 总结

双节爬壁机器人通过以下核心机制在航空发动机内壁移动：

1. **交替吸附**：前后足交替吸附，确保始终有一足固定
2. **翻折控制**：通过θ3角度变化抬起/放下未吸附足
3. **贴紧后切换**：切换吸附前必须先将未吸附足贴紧壁面
4. **多种运动模式**：
   - 蠕虫式爬行（丝杠伸缩 + 小角度调整）
   - 旋转式移动（绕吸附点旋转180°）
5. **避障规划**：通过路径规划绕过叶片障碍物

这种设计使机器人能够在复杂的圆柱形内腔环境中安全、稳定地移动，完成检测任务。

---

*文档版本：1.0*
*创建日期：2024*
*适用项目：双节机器人运动规划系统 (jetEngineMotion)*
